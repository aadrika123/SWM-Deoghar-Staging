import{j as e,B as A,g as $,e as F,h as B,I as E}from"./index-DLJkMWUB.js";import{u as I,r as T}from"./router-DWxcwEcu.js";import{C as L,b as k}from"./card-DUlyuvVJ.js";import{P as V}from"./index-DLclbM7J.js";import{P as W}from"./index-ChwPXrDZ.js";import{u as z,F as H,c as M,a as i,o as G}from"./switch-BXlVt4iJ.js";import{R as u}from"./RHFTextField-DfgCabiT.js";import{R as h}from"./SelectField-CdkMqz-G.js";import{u as _,a as q}from"./useComonData-DLKLz-GL.js";import{S as c}from"./separator-DmTdbWr4.js";import"./headlessui-DlCzxctq.js";import"./axios-BrYcoDUu.js";import"./chevron-right-BiB29jRa.js";function J({consumerData:a}){var l,d;const n=I();return a!=null&&a.isFetching?e.jsx(e.Fragment,{children:Array.from({length:10}).map((s,m)=>e.jsx("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:e.jsx("div",{className:"animate-pulse flex space-x-4",children:e.jsxs("div",{className:"flex-1 space-y-4 py-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})})},m+1))}):e.jsx(e.Fragment,{children:a.status==="success"&&((d=(l=a==null?void 0:a.data)==null?void 0:l.data)==null?void 0:d.length)>0?a.data.data.map(s=>e.jsx("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500",children:"Consumer No :"}),e.jsx("div",{className:"text-xs font-semibold text-gray-500 w-30 truncate",children:s.consumerNo})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500",children:"Consumer Name :"}),e.jsx("div",{className:"text-xs font-semibold text-gray-500 w-30 truncate",children:s.consumerName})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500",children:"Mobile No :"}),e.jsx("div",{className:"text-xs font-semibold text-gray-500 w-30 truncate",children:s.mobileNo})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500",children:"Ward No :"}),e.jsx("div",{className:"text-xs font-semibold text-gray-500",children:s.wardNo})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500",children:"Category :"}),e.jsx("div",{className:"text-xs font-semibold text-gray-500",children:s.cansumerCategory})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500",children:"Type :"}),e.jsx("div",{className:"text-xs font-semibold text-gray-500",children:s.cansumerType})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500",children:"Paid Status :"}),e.jsx("div",{className:"text-xs font-semibold text-gray-500",children:s.paidStatus==="Paid"?e.jsx("span",{className:"px-2 py-1 text-xs font-semibold flex justify-start items-center border border-green-500 text-green-500 rounded-lg",children:s.paidStatus}):e.jsx("span",{className:"px-2 py-1 text-xs font-semibold flex justify-start items-center border border-red-500 text-red-500 rounded-lg",children:s.paidStatus})})]}),e.jsx(c,{}),e.jsx("div",{className:"col-span-1 w-full",children:e.jsx(A,{onClick:()=>n("/deoghar-app/consumer-actions/".concat(s.id)),variant:"outline",className:"w-full rounded-lg ",size:"sm",children:e.jsx("h1",{className:"text-xs font-semibold text-gray-600",children:"VIEW DETAILS"})})})]})},s.id)):e.jsx("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"text-xs font-semibold text-gray-500",children:"No Data Found"})})})})}const K=M().shape({consumerName:i(),mobileNo:i(),consumerCategory:i(),consumerNo:i(),consumertype:i(),wardNo:i()});function de(){var g,N,j,p,b,f,y,v,w,C,S,P;const{getAllUser:a}=_(),{getConsumerAddFormData:n}=q(),[l,d]=T.useState(1),[s,m]=T.useState(10),t=z({resolver:G(K),defaultValues:{consumerCategory:"0",consumerNo:"",consumertype:"",wardNo:""}}),o=$({api:F.getConsumerListByCategory,config:{mobileNo:t.watch("mobileNo"),consumerName:t.watch("consumerName"),consumerCategory:t.watch("consumerCategory")=="0"?"":t.watch("consumerCategory"),consumerNo:t.watch("consumerNo"),consumertype:t.watch("consumertype"),wardNo:t.watch("wardNo"),page:l,perPage:s},value:[l,d],options:{enabled:l>1||l>10}}),x=B({api:"".concat(F.getConsumerTypeByCategory,"/").concat(t.watch("consumerCategory")),options:{enabled:!!t.watch("consumerCategory")&&t.watch("consumerCategory")!="0"}}),R=async r=>{d(1),m(10),o.refetch()};return e.jsx(W,{title:"Search Consumer",children:e.jsxs("main",{className:"py-6 grid grid-cols-1 gap-4 px-4",children:[e.jsxs("div",{className:"flex space-x-3 items-center justify-start",children:[e.jsx(E,{src:"/assets/icons/searchConsumer.svg",alt:"Add Consumer",className:"w-11 h-11 rounded-lg bg-gray-200 p-2"}),e.jsxs("div",{className:"",children:[e.jsx("h1",{className:" font-semibold",children:"Search Consumer"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Search consumer details here."})]})]}),e.jsx(c,{}),e.jsx(L,{className:"overflow-hidden py-4","x-chunk":"dashboard-05-chunk-4",children:e.jsx(k,{className:"px-6 text-sm",children:e.jsx(H,{methods:t,onSubmit:t.handleSubmit(R),children:e.jsxs("div",{className:"grid grid-cols-2 gap-x-4",children:[e.jsx("div",{className:"mt-4",children:e.jsx(u,{name:"consumerName",label:"Consumer Name",className:"w-full"})}),e.jsx("div",{className:"mt-4",children:e.jsx(u,{name:"mobileNo",label:"Mobile No",className:"w-full",inputValidation:["mobile","number"]})}),e.jsx("div",{className:"mt-4",children:e.jsx(u,{name:"consumerNo",label:"Consumer No",className:"w-full"})}),e.jsx("div",{className:"mt-4",children:e.jsx(h,{name:"wardNo",label:"Ward No",className:"w-full",data:(p=(j=(N=(g=a==null?void 0:a.data)==null?void 0:g.data[0].ulbDetails[0])==null?void 0:N.wards)==null?void 0:j.map(r=>({label:String(r),value:String(r)})))!=null?p:[]})}),e.jsx("div",{className:"mt-4",children:e.jsx(h,{name:"consumerCategory",label:"Consumer Category",className:"w-full",data:(v=(y=(f=(b=n==null?void 0:n.data)==null?void 0:b.data)==null?void 0:f.consumerCategory)==null?void 0:y.map(r=>({label:String(r.name),value:String(r.id)})))!=null?v:[]})}),e.jsx("div",{className:"mt-4",children:e.jsx(h,{name:"consumertype",label:"Consumer Type",className:"w-full",data:(P=(S=(C=(w=x==null?void 0:x.data)==null?void 0:w.data)==null?void 0:C.consumerTypeList)==null?void 0:S.map(r=>({label:String(r.name),value:String(r.id)})))!=null?P:[]})}),e.jsx("div",{className:"flex justify-end mt-5 col-span-2",children:e.jsx(A,{type:"submit",variant:"default",size:"sm",className:"rounded-md w-24 bg-green-500 hover:bg-green-600",children:"Search"})})]})})})}),e.jsx(c,{className:"mt-2 mb-2"}),e.jsx(J,{consumerData:o}),(o==null?void 0:o.status)==="success"&&e.jsxs(e.Fragment,{children:[e.jsx(V,{page:l,perPage:s,totalPage:10,setPage:r=>d(r)}),e.jsx(c,{})]})]})})}export{de as default};
