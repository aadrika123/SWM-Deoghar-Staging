import{u as E,h as H,j as e,e as T,C as I,_ as b}from"./index-vcigWjLs.js";import{d as V,h as _,r as M}from"./router-CTqkcgir.js";import{u as k,o as L,F as W,S as x,c as z,a as s}from"./SelectField-Izir4luE.js";import{P as G}from"./index-Bz363WIl.js";import{I as J}from"./Image-BdTcg04Q.js";import{C as K,b as O}from"./card-D7RKagU1.js";import{S as Q}from"./separator-CKmjNwsX.js";import{a as U,b as X}from"./useComonData-GwA8vmg1.js";import{u as Y}from"./useMonthMap-C8hLMgQU.js";import{g as Z}from"./services-KQnp_8oA.js";import{R as i}from"./RHFTextField-DrpZuvZl.js";import{R as D}from"./RHFTextArea-DxEeUjVI.js";import{B as ee}from"./ButtonLoading-TCiFngQR.js";import"./headlessui-BV7w-sRG.js";import"./axios-DmypytPv.js";import"./moment-BjLXg0w5.js";const ae=z().shape({wardNo:s().required().label("Ward no"),holdingNo:s().required().label("Holding no"),consumerNo:s().required().label("Consumer no"),mobileNo:s().required().label("Mobile no"),demandFrom:s().required().label("Demand from"),consumerCategory:s().required().label("Consumer category"),consumerType:s().required().label("Consumer type"),renterName:s().required().label("Renter name"),pinCode:s().notRequired().label("Pin code"),address:s().required().label("Address")});function Ne(){var N,y,j,C,f,v;const l=E({}),$=V(),{id:u}=_(),{getConsumerAddFormData:c}=U(),{resultList:p}=Y("4-1-2022"),a=H({api:`${T.getConsumerDetailsById}/${u}`,options:{enabled:!!u}}),h=M.useMemo(()=>{var r,o,n,t,d,R,S,q,F,A,w,P;return{wardNo:String((o=(r=a==null?void 0:a.data)==null?void 0:r.data[0])==null?void 0:o.wardNo)??"",holdingNo:String((t=(n=a==null?void 0:a.data)==null?void 0:n.data[0])==null?void 0:t.holdingNo)??"",consumerNo:String((R=(d=a==null?void 0:a.data)==null?void 0:d.data[0])==null?void 0:R.consumerNo)??"",consumerName:String((q=(S=a==null?void 0:a.data)==null?void 0:S.data[0])==null?void 0:q.consumerName)??"",mobileNo:"",demandFrom:"",consumerCategory:"",consumerType:"",renterName:"",address:String((A=(F=a==null?void 0:a.data)==null?void 0:F.data[0])==null?void 0:A.Address)??"",pinCode:String((P=(w=a==null?void 0:a.data)==null?void 0:w.data[0])==null?void 0:P.pinCode)??""}},[(N=a==null?void 0:a.data)==null?void 0:N.data[0]]),m=k({resolver:L(ae),defaultValues:h}),B=async r=>{I("Are you sure?","Please confirm",async()=>{var o,n,t;try{const d=await l.mutateAsync({api:T.postRenterForn,data:{consumerId:u,consumerCategory:r.consumerCategory,consumerName:r.renterName,consumerType:r.consumerType,demandFrom:r.demandFrom,holdingNo:r.holdingNo,mobileNo:r.mobileNo,pinCode:r.pinCode,address:r.address,wardNo:r.wardNo}});d.data.status?(b.success(d.data.msg),$(`/deoghar-app/consumer-actions/${(t=(n=(o=d==null?void 0:d.data)==null?void 0:o.data)==null?void 0:n.demandDetails[0])==null?void 0:t.consumer_id}`)):b.error(d.data.msg)}catch(d){b.error(Z(d))}})};M.useEffect(()=>{var r;(r=a==null?void 0:a.data)!=null&&r.data[0]&&m.reset(h)},[(y=a==null?void 0:a.data)==null?void 0:y.data[0].id]);const{consumerCategoryData:g}=X(m.watch("consumerCategory"));return e.jsx(G,{title:"Add Renter",children:e.jsxs("main",{className:"py-6 grid grid-cols-1 gap-4 px-4",children:[e.jsxs("div",{className:"flex space-x-3 items-center justify-start",children:[e.jsx(J,{src:"/assets/icons/searchConsumer.svg",alt:"Add Consumer",className:"w-11 h-11 rounded-lg bg-gray-200 p-2"}),e.jsxs("div",{className:"",children:[e.jsx("h1",{className:" font-semibold",children:"Add Renter"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Solid west management system"})]})]}),e.jsx(Q,{}),e.jsx(K,{className:"overflow-hidden py-4","x-chunk":"dashboard-05-chunk-4",children:e.jsx(O,{className:"px-6 text-sm",children:e.jsx(W,{methods:m,onSubmit:m.handleSubmit(B),children:e.jsxs("div",{className:"grid grid-cols-1 gap-3 space-x-1",children:[e.jsx(i,{name:"wardNo",label:"Ward no",disabled:!0,isRequired:!0}),e.jsx(i,{name:"holdingNo",label:"Holding no",disabled:!0,isRequired:!0}),e.jsx("div",{children:e.jsx(x,{name:"consumerCategory",label:"Consumer Category",isRequired:!0,data:((f=(C=(j=c==null?void 0:c.data)==null?void 0:j.data)==null?void 0:C.consumerCategory)==null?void 0:f.map(r=>({label:String(r.name),value:String(r.id)})))??[]})}),e.jsx("div",{children:e.jsx(x,{name:"consumerType",label:"Consumer Type",isRequired:!0,data:((v=g==null?void 0:g.data)==null?void 0:v.data.consumerTypeList.map(r=>({label:String(r.name),value:String(r.id)})))??[]})}),e.jsx("div",{children:e.jsx(i,{name:"renterName",label:"Renter Name",isRequired:!0})}),e.jsx("div",{children:e.jsx(i,{type:"number",isRequired:!0,name:"mobileNo",label:"Mobile no",inputValidation:["mobile"]})}),e.jsx("div",{children:e.jsx(D,{name:"address",label:"Address",disabled:!0})}),e.jsx("div",{children:e.jsx(i,{type:"number",name:"pinCode",label:"Pin Code",inputValidation:["zip"],disabled:!0})}),e.jsx("div",{children:e.jsx(x,{name:"demandFrom",label:"Demand From",isRequired:!0,data:(p==null?void 0:p.map(r=>({label:String(r.str),value:String(r.str)})))??[]})}),e.jsx("div",{children:e.jsx(ee,{isLoading:l.isPending,disabled:l.isPending,type:"submit",className:"w-full mt-4",children:"Add Renter"})})]})})})})]})})}export{Ne as default};
