import{j as e,B as S,h as b,e as v,I as P}from"./index-DLJkMWUB.js";import{u as F,r as y}from"./router-DWxcwEcu.js";import{C,b as $}from"./card-DUlyuvVJ.js";import{P as I}from"./index-DLclbM7J.js";import{P as L}from"./index-ChwPXrDZ.js";import{u as R,F as k,c as E,a as o,o as W}from"./switch-BXlVt4iJ.js";import{R as B}from"./RHFTextField-DfgCabiT.js";import{R as w}from"./SelectField-CdkMqz-G.js";import{u as T}from"./useComonData-DLKLz-GL.js";import{S as n}from"./separator-DmTdbWr4.js";import"./headlessui-DlCzxctq.js";import"./axios-BrYcoDUu.js";import"./chevron-right-BiB29jRa.js";function z({apartmentData:t}){var d,i;const c=F();return t!=null&&t.isFetching?e.jsx(e.Fragment,{children:Array.from({length:10}).map((a,s)=>e.jsx("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:e.jsx("div",{className:"animate-pulse flex space-x-4",children:e.jsxs("div",{className:"flex-1 space-y-4 py-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})})},s+1))}):e.jsx(e.Fragment,{children:t.status==="success"&&((i=(d=t==null?void 0:t.data)==null?void 0:d.data)==null?void 0:i.length)>0?t.data.data.map(a=>e.jsx("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:[e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500",children:"Apartment Name :"}),e.jsx("div",{className:"text-xs font-semibold text-gray-500 w-30 truncate",children:a.apartmentName})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500",children:"Ward No :"}),e.jsx("div",{className:"text-xs font-semibold text-gray-500",children:a.wardNo})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500",children:"Apartment code :"}),e.jsx("div",{className:"text-xs font-semibold text-gray-500",children:a.apartmentCode})]}),a.totalDemand>"0"&&e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500",children:"Demand upto :"}),e.jsx("div",{className:"text-xs font-semibold text-gray-500",children:a.demandUpto})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500",children:"Total demand :"}),e.jsx("div",{className:"text-xs font-semibold text-gray-500",children:a.totalDemand})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500",children:"Paid Status :"}),e.jsx("div",{className:"text-xs font-semibold text-gray-500",children:a.paidStatus==="Paid"?e.jsx("span",{className:"px-2 py-1 text-xs font-semibold flex justify-start items-center border border-green-500 text-green-500 rounded-lg",children:a.paidStatus}):e.jsx("span",{className:"px-2 py-1 text-xs font-semibold flex justify-start items-center border border-red-500 text-red-500 rounded-lg",children:a.paidStatus})})]}),e.jsx(n,{className:"mt-4"}),e.jsx("div",{className:"col-span-1 w-full mt-4",children:e.jsx(S,{onClick:()=>c("/deoghar-app/apartment-actions/".concat(a.id)),variant:"outline",className:"w-full rounded-lg ",size:"sm",children:e.jsx("h1",{className:"text-xs font-semibold text-gray-600",children:"VIEW DETAILS"})})})]})},a.id)):e.jsx("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"text-xs font-semibold text-gray-500",children:"No Data Found"})})})})}const H=E().shape({apartmentId:o(),apartmentName:o(),wardNo:o()});function D(){var x,h,p,g,u,j,N,f;const{getAllUser:t}=T(),[c,d]=y.useState(1),[i,a]=y.useState(10),s=R({resolver:W(H),defaultValues:{apartmentId:"",apartmentName:"",wardNo:""}}),l=b({api:"".concat(v.getApartmentList,"?\n      ").concat(s!=null&&s.watch("apartmentName")?"apartmentName=".concat(s==null?void 0:s.watch("apartmentName")):"apartmentId=".concat(s==null?void 0:s.watch("apartmentId"))),key:"apartmentData",options:{enabled:!1}}),m=b({api:"".concat(v.getApartmentListByWardNo,"/").concat(s.watch("wardNo")),options:{enabled:!!s.watch("wardNo")}}),A=async r=>{d(1),a(10),l.refetch()};return e.jsx(L,{title:"Search Apartment",children:e.jsxs("main",{className:"py-6 grid grid-cols-1 gap-4 px-4",children:[e.jsxs("div",{className:"flex space-x-3 items-center justify-start",children:[e.jsx(P,{src:"/assets/image/apartment.png",alt:"Add Consumer",className:"w-11 h-11 rounded-lg bg-gray-200 p-2"}),e.jsxs("div",{className:"",children:[e.jsx("h1",{className:" font-semibold",children:"Search Apartment"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Search apartment details here."})]})]}),e.jsx(n,{}),e.jsx(C,{className:"overflow-hidden py-4","x-chunk":"dashboard-05-chunk-4",children:e.jsx($,{className:"px-6 text-sm",children:e.jsx(k,{methods:s,onSubmit:s.handleSubmit(A),children:e.jsxs("div",{className:"flex flex-wrap",children:[e.jsx("div",{className:"w-full mt-3",children:e.jsx(B,{name:"apartmentName",label:"Apartment name",className:"w-full"})}),e.jsx("div",{className:"w-full mt-3",children:e.jsx(w,{name:"wardNo",label:"Ward No",className:"w-full",data:(g=(p=(h=(x=t==null?void 0:t.data)==null?void 0:x.data[0].ulbDetails[0])==null?void 0:h.wards)==null?void 0:p.map(r=>({label:String(r),value:String(r)})))!=null?g:[]})}),e.jsx("div",{className:"w-full mt-3",children:e.jsx(w,{name:"apartmentId",label:"Apartment",className:"w-full",data:(f=(N=(j=(u=m==null?void 0:m.data)==null?void 0:u.data)==null?void 0:j.apartmentList)==null?void 0:N.map(r=>({label:String(r.apt_name),value:String(r.id)})))!=null?f:[]})}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(S,{type:"submit",variant:"default",size:"sm",className:"rounded-md w-24 bg-green-500 hover:bg-green-600",children:"Search"})})]})})})}),e.jsx(n,{className:"mt-1 mb-1"}),e.jsx(z,{apartmentData:l}),(l==null?void 0:l.status)==="success"&&e.jsxs(e.Fragment,{children:[e.jsx(I,{page:c,perPage:i,totalPage:10,setPage:r=>d(r)}),e.jsx(n,{})]})]})})}export{D as default};
