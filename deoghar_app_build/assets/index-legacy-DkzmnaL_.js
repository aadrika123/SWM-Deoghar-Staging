!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e=function(){return r};var n,r={},a=Object.prototype,i=a.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},l="function"==typeof Symbol?Symbol:{},s=l.iterator||"@@iterator",c=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(n){u=function(t,e,n){return t[e]=n}}function h(t,e,n,r){var a=e&&e.prototype instanceof g?e:g,i=Object.create(a.prototype),l=new D(r||[]);return o(i,"_invoke",{value:k(t,n,l)}),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}r.wrap=h;var p="suspendedStart",m="suspendedYield",v="executing",x="completed",y={};function g(){}function j(){}function b(){}var w={};u(w,s,(function(){return this}));var L=Object.getPrototypeOf,N=L&&L(L(T([])));N&&N!==a&&i.call(N,s)&&(w=N);var S=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function F(e,n){function r(a,o,l,s){var c=f(e[a],e,o);if("throw"!==c.type){var d=c.arg,u=d.value;return u&&"object"==t(u)&&i.call(u,"__await")?n.resolve(u.__await).then((function(t){r("next",t,l,s)}),(function(t){r("throw",t,l,s)})):n.resolve(u).then((function(t){d.value=t,l(d)}),(function(t){return r("throw",t,l,s)}))}s(c.arg)}var a;o(this,"_invoke",{value:function(t,e){function i(){return new n((function(n,a){r(t,e,n,a)}))}return a=a?a.then(i,i):i()}})}function k(t,e,r){var a=p;return function(i,o){if(a===v)throw Error("Generator is already running");if(a===x){if("throw"===i)throw o;return{value:n,done:!0}}for(r.method=i,r.arg=o;;){var l=r.delegate;if(l){var s=O(l,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===p)throw a=x,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=v;var c=f(t,e,r);if("normal"===c.type){if(a=r.done?x:m,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(a=x,r.method="throw",r.arg=c.arg)}}}function O(t,e){var r=e.method,a=t.iterator[r];if(a===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=n,O(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(a,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,y;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,y):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(i.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}throw new TypeError(t(e)+" is not iterable")}return j.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:j,configurable:!0}),j.displayName=u(b,d,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===j||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,d,"GeneratorFunction")),t.prototype=Object.create(S),t},r.awrap=function(t){return{__await:t}},E(F.prototype),u(F.prototype,c,(function(){return this})),r.AsyncIterator=F,r.async=function(t,e,n,a,i){void 0===i&&(i=Promise);var o=new F(h(t,e,n,a),i);return r.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},E(S),u(S,d,"Generator"),u(S,s,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},r.values=T,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(A),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,a){return l.type="throw",l.arg=t,e.next=r,a&&(e.method="next",e.arg=n),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;A(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:T(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),y}},r}function n(t,e,n,r,a,i,o){try{var l=t[i](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,a)}function r(t){return function(){var e=this,r=arguments;return new Promise((function(a,i){var o=t.apply(e,r);function l(t){n(o,a,i,l,s,"next",t)}function s(t){n(o,a,i,l,s,"throw",t)}l(void 0)}))}}System.register(["./index-legacy-DZRWbTlb.js","./switch-legacy-DLlz0TZj.js","./services-legacy-BAvdU-qa.js","./RHFTextArea-legacy-DeronzW4.js","./ButtonLoading-legacy-Bl1pxCRm.js","./router-legacy-BWed7M0P.js","./RHFUploadFiled-legacy-ifTYiZne.js","./SelectField-legacy-BT6XHfBz.js","./index-legacy-Bphi7g04.js","./card-legacy-BNat6TZ9.js","./separator-legacy-BEX47OsO.js","./SkeletonLoader-legacy-BhA9khPV.js","./OverLayLoader-legacy-BBZxaZn4.js","./headlessui-legacy-BlMjWznQ.js","./axios-legacy-COJRtORB.js","./module-legacy-B1UphMfU.js"],(function(t,n){"use strict";var a,i,o,l,s,c,d,u,h,f,p,m,v,x,y,g,j,b,w,L,N,S,E,F,k,O,_;return{setters:[function(t){a=t.u,i=t.h,o=t.g,l=t.e,s=t.j,c=t.I,d=t.C,u=t._},function(t){h=t.u,f=t.F,p=t.c,m=t.a,v=t.e,x=t.o},function(t){y=t.g},function(t){g=t.R},function(t){j=t.B},function(t){b=t.u,w=t.i},function(t){L=t.R},function(t){N=t.R},function(t){S=t.P},function(t){E=t.C,F=t.b},function(t){k=t.S},function(t){O=t.S},function(t){_=t.O},null,null,null],execute:function(){t("default",(function(){var t,p,m,v,A,D,T,U,M,P,R,q,I,G,B,z,C=b(),Y=a({}),H=w().id,Q=i({api:"".concat(l.getApartmentDetailsById,"/").concat(H),options:{enabled:!!H}}),V=o({api:l.getPaymentData,config:{apartmentId:H},options:{enabled:!!H}}),Z=h({resolver:x(n)}),$=function(){var t=r(e().mark((function t(n){var a,i;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(i=new FormData).append("apartmentId",String(H)),i.append("adjustUpto",n.paymentUpToMonth),i.append("adjustAmount",String(null==J||null===(a=J.data)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.totaldemand)),i.append("remarks",n.remarks),i.append("billFile",n.billFile),d("Are you sure?","Please confirm",r(e().mark((function t(){var n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Y.mutateAsync({api:l.paymentAdjustment,data:i});case 3:(n=t.sent).data.status?(u.success(n.data.msg),C("/deoghar-app/apartment-actions/".concat(H))):u.error(n.data.msg),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),u.error(y(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),J=o({api:l.getCalculatedAmount,config:{apartmentId:H,payUpto:Z.watch("paymentUpToMonth")},value:[Z.watch("paymentUpToMonth")],options:{enabled:!!Z.watch("paymentUpToMonth")&&!!H}});if(null!=Q&&Q.isLoading)return s.jsx("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:s.jsx(E,{children:s.jsxs(F,{children:[s.jsx(O,{}),s.jsx(O,{}),s.jsx(O,{})]})})});return s.jsxs(S,{title:"Demand Update",children:[Y.isLoading&&s.jsx(_,{}),s.jsxs("main",{className:"py-6 grid grid-cols-1 gap-4 px-4",children:[s.jsxs("div",{className:"flex space-x-3 items-center justify-start",children:[s.jsx(c,{src:"/assets/image/category.png",alt:"Demand Update",className:"w-11 h-11 rounded-lg bg-gray-200 p-2"}),s.jsxs("div",{className:"",children:[s.jsx("h1",{className:"font-semibold",children:"Demand Update"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Solid waste management system"})]})]}),s.jsx(k,{}),s.jsx(E,{children:s.jsx(F,{children:s.jsxs("div",{className:"grid grid-cols-2 gap-3 py-6",children:[s.jsx("div",{children:s.jsx("h1",{className:"text-xs font-semibold",children:"Apartment code:"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-xs",children:null==Q||null===(t=Q.data)||void 0===t||null===(t=t.data[0])||void 0===t?void 0:t.apartmentCode})}),s.jsx("div",{children:s.jsx("h1",{className:"text-xs font-semibold",children:"Apartment Name:"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-xs",children:null==Q||null===(p=Q.data)||void 0===p||null===(p=p.data[0])||void 0===p?void 0:p.apartmentName})}),s.jsx("div",{children:s.jsx("h1",{className:"text-xs font-semibold",children:"Mobile no:"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-xs",children:null==Q||null===(m=Q.data)||void 0===m||null===(m=m.data[0])||void 0===m?void 0:m.mobileNo})}),(null==Q||null===(v=Q.data)||void 0===v?void 0:v.totalAptMonthlyDemand)>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{children:s.jsx("h1",{className:"text-xs font-semibold",children:"Monthly Demand/Rate:"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-xs",children:null==Q||null===(A=Q.data)||void 0===A?void 0:A.totalAptMonthlyDemand})})]}),s.jsx("div",{children:s.jsx("h1",{className:"text-xs font-semibold",children:"Outstanding Demand:"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-xs",children:null==Q||null===(D=Q.data)||void 0===D?void 0:D.totalAptDemand})}),(null==Q||null===(T=Q.data)||void 0===T?void 0:T.totalAptDemand)>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{children:s.jsx("h1",{className:"text-xs font-semibold",children:"Demand from:"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-xs",children:null==Q||null===(U=Q.data)||void 0===U||null===(U=U.data[0])||void 0===U?void 0:U.demandFrom})})]}),(null==Q||null===(M=Q.data)||void 0===M?void 0:M.totalAptDemand)>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{children:s.jsx("h1",{className:"text-xs font-semibold",children:"Demand upto:"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-xs",children:null==Q||null===(P=Q.data)||void 0===P||null===(P=P.data[0])||void 0===P?void 0:P.demandUpto})})]}),s.jsx("div",{children:s.jsx("h1",{className:"text-xs font-semibold",children:"Total flats:"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-xs",children:null==Q||null===(R=Q.data)||void 0===R||null===(R=R.data)||void 0===R?void 0:R.length})}),s.jsx("div",{children:s.jsx("h1",{className:"text-xs font-semibold",children:"Address:"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-xs",children:null==Q||null===(q=Q.data)||void 0===q||null===(q=q.data[0])||void 0===q?void 0:q.address})})]})})}),s.jsx(k,{}),s.jsx(E,{children:s.jsx(F,{children:s.jsx(f,{methods:Z,onSubmit:Z.handleSubmit($),children:s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[s.jsx("div",{children:s.jsx(N,{name:"paymentUpToMonth",isRequired:!0,label:"Payment Upto Month",data:null!==(I=null==V||null===(G=V.data)||void 0===G||null===(G=G.data)||void 0===G||null===(G=G.demand)||void 0===G?void 0:G.map((function(t){return{label:t.payment_to,value:t.payment_to}})))&&void 0!==I?I:[]})}),s.jsx("div",{children:s.jsx(g,{name:"remarks",label:"Remarks",isRequired:!0})}),s.jsx("div",{children:s.jsx(L,{isRequired:!0,name:"billFile",label:"Bill File",type:"file",accept:".pdf"})}),s.jsx("div",{className:"flex justify-end mt-2",children:s.jsxs(j,{type:"submit",size:"sm",isLoading:Y.isLoading||J.isLoading,disabled:J.isLoading||Y.isLoading,children:[J.isLoading?"Loading...":"SUBMIT"," ",(null==J||null===(B=J.data)||void 0===B||null===(B=B.data)||void 0===B?void 0:B.totaldemand)&&(null==J||null===(z=J.data)||void 0===z||null===(z=z.data)||void 0===z?void 0:z.totaldemand)]})})]})})})})]})]})}));var n=p().shape({paymentUpToMonth:m().required("Month is required"),remarks:m().required("Remark is required"),billFile:v().required("Bill File is required").test("fileSize","File Size is too large. Max 900kb allowed.",(function(t){return t&&t.size<=9e5}))})}}}))}();
