import{j as e,B as h,a as v,g as S,e as w,I as F}from"./index-DXAP7HMK.js";import{u as P,r as b}from"./router-DWxcwEcu.js";import{C as I,b as T}from"./card-Dnkgt-lK.js";import{P as k}from"./index-gknJnDCP.js";import{P as A}from"./index-B7ott4wP.js";import{u as R,F as Y,c as _,a as m,o as $}from"./switch-BZUTkljd.js";import{R as x}from"./RHFTextField-BtYS6x_Q.js";import{R as z}from"./SelectField-BYfYy3BD.js";import{c as M}from"./useComonData-DluspwLW.js";import{S as i}from"./separator-CZ5rP9d9.js";import{h as B}from"./moment-CbGOrKEH.js";import"./headlessui-DlCzxctq.js";import"./axios-BrYcoDUu.js";function E({viewComplainListData:a}){var l,d,n,o;const r=P();return a!=null&&a.isFetching?e.jsx(e.Fragment,{children:Array.from({length:10}).map((s,t)=>e.jsx("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:e.jsx("div",{className:"animate-pulse flex space-x-4",children:e.jsxs("div",{className:"flex-1 space-y-4 py-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})})},t+1))}):e.jsx("div",{children:a.status==="success"&&((d=(l=a==null?void 0:a.data)==null?void 0:l.data)==null?void 0:d.length)>0?(o=(n=a==null?void 0:a.data)==null?void 0:n.data)==null?void 0:o.map((s,t)=>e.jsxs("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm mt-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 justify-center items-center",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Consumer Name:"}),e.jsx("div",{className:"text-sm font-semibold text-gray-500 w-30 truncate",children:s.consumer_name}),e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Complain No:"}),e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:s.complain_no}),e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Ward :"}),e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:s.ward_no}),e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Date"}),e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:B(s.date).format("DD-MM-YYYY")}),s.tcName!==null&&s.tcName!==void 0&&s.tcName!==""&&e.jsxs(e.Fragment,{children:[" ",e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"TC"}),e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:s.tcName})]})]}),e.jsx(i,{className:"mt-4 mb-4"}),e.jsxs("div",{className:"flex justify-between mt-4 space-x-4",children:[e.jsx(h,{size:"sm",variant:"destructive",className:" w-full",onClick:()=>{r("/deoghar-app/view-complain-detail/".concat(s.id))},children:"View"}),e.jsx(h,{size:"sm",className:" w-full",onClick:()=>{r("/deoghar-app/view-complain-map/".concat(s.id))},children:"View Map"})]})]},t+1)):e.jsx("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"No Data Found"})})})})}const H=_().shape({fromDate:m(),toDate:m(),tcId:m(),search:m()});function L(){var g,j,f,u,p,N;const{user:a}=v(),{getTcList:r}=M(),[l,d]=b.useState(1),[n,o]=b.useState(10),s=R({resolver:$(H)}),t=S({api:w.getComplainList,config:{fromDate:s.watch("fromDate"),toDate:s.watch("toDate"),tcId:(a==null?void 0:a.userTypeId)==5||s.watch("tcId")!=""?s.watch("tcId"):"",search:s.watch("search")},options:{enabled:!0}}),y=async c=>{d(1),o(10),t.refetch()};return e.jsx(A,{title:"Complain List",children:e.jsxs("main",{className:"py-6 grid grid-cols-1 gap-4 px-4",children:[e.jsxs("div",{className:"flex space-x-3 items-center justify-start",children:[e.jsx(F,{src:"/assets/icons/coins.svg",alt:"Add Consumer",className:"w-11 h-11 rounded-lg bg-gray-200 p-2"}),e.jsxs("div",{className:"",children:[e.jsx("h1",{className:" font-semibold",children:"Complain List"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Solid waste management system"})]})]}),e.jsx(i,{}),e.jsx(I,{className:"overflow-hidden py-4","x-chunk":"dashboard-05-chunk-4",children:e.jsx(T,{className:"px-6 text-sm",children:e.jsx(Y,{methods:s,onSubmit:s.handleSubmit(y),children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsx(x,{name:"fromDate",label:"From Date",className:"w-full",type:"date"})}),e.jsx("div",{children:e.jsx(x,{name:"toDate",label:"To Date",className:"w-full",type:"date"})}),(a==null?void 0:a.userTypeId)==4&&e.jsx("div",{className:"col-span-2",children:e.jsx(z,{name:"tcId",label:"TC",className:"w-full",data:(f=(j=(g=r==null?void 0:r.data)==null?void 0:g.data)==null?void 0:j.map(c=>({label:String(c.tcName),value:String(c.tcId)})))!=null?f:[]})}),e.jsx("div",{className:"col-span-2",children:e.jsx(x,{name:"search",label:"Search",className:"w-full",placeholder:"Search by complain no"})}),e.jsx("div",{className:"col-span-2 mt-2",children:e.jsx(h,{type:"submit",variant:"default",size:"sm",className:"rounded-md w-24",children:"Search"})})]})})})}),e.jsx(i,{}),e.jsx("div",{className:"flex justify-between item-center",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Total Transaction:"}),e.jsx("h1",{className:"text-xs text-green-800 font-bold",children:(N=(p=(u=t==null?void 0:t.data)==null?void 0:u.data)==null?void 0:p.length)!=null?N:0})]})}),e.jsx(E,{viewComplainListData:t}),(t==null?void 0:t.status)==="success"&&e.jsxs(e.Fragment,{children:[e.jsx(k,{page:l,perPage:n,totalPage:10,setPage:c=>d(c)}),e.jsx(i,{})]})]})})}export{L as default};
