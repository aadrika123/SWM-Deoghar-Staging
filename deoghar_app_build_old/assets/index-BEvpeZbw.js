import{u as P,j as e,I as M,C as V,e as B,_ as u}from"./index-DEa_txxx.js";import{P as D}from"./index-CHWdEz7k.js";import{C as H,b as I}from"./card-CArCQTth.js";import{c as $,a,u as z,F as G,o as W}from"./switch-Dki4Nm8l.js";import{R as i}from"./RHFTextField-BIF68JPT.js";import{B as _}from"./ButtonLoading-L4RYSfHc.js";import{u as E}from"./router-DWxcwEcu.js";import{R as o}from"./SelectField-CHbza0qJ.js";import{a as k,u as J,b as K}from"./useComonData-CqDrv_R-.js";import{S as O}from"./separator-BaqTMRDP.js";import{u as Q}from"./useMonthMap-DqC9yJdg.js";import"./headlessui-DlCzxctq.js";import"./axios-BrYcoDUu.js";import"./moment-CbGOrKEH.js";function me(){var c,p,x,g,h,b,j,y,N,C,f,v,q;const w=E(),t=P({}),{resultList:A}=Q("4-1-2022"),{getConsumerAddFormData:d}=k(),{getAllUser:l}=J(),T=$().shape({wardNo:a().required().label("Ward no"),holdingNo:a(),consumerName:a().required().label("Consumer name"),mobileNo:a().required().label("Mobile no"),address:a().required().label("Address"),pinCode:a().required().label("Pin code"),consumerCategory:a().required().label("Consumer category"),consumerType:a().required().label("Consumer type"),demandFrom:a().required().label("Demand from"),firmName:a().when("consumerCategory",{is:"2",then:()=>a().required().label("Firm name")}),licenseNo:a().when("consumerCategory",{is:"2",then:()=>a().required().label("License no")}),selectText:a()}),n=z({resolver:W(T),defaultValues:{wardNo:"",holdingNo:"",consumerName:"",mobileNo:"",address:"",pinCode:"",consumerCategory:"",consumerType:"",demandFrom:"",firmName:"",licenseNo:"",selectText:""}}),{consumerCategoryData:m}=K(String(n.watch("consumerCategory"))),L=async r=>{V("Are you sure?","Please confirm",async()=>{var S,R,F;try{const s=await(t==null?void 0:t.mutateAsync({api:(S=B)==null?void 0:S.postConsumerAdd,data:r}));s!=null&&s.data.status?(u.success(s==null?void 0:s.data.msg),w("/deoghar-app/consumer-actions/".concat((F=(R=s==null?void 0:s.data)==null?void 0:R.data)==null?void 0:F.consumerId))):u.error(s==null?void 0:s.data.msg)}catch(s){u.error("Something went wrong")}})};return e.jsx(D,{title:"Add Consumer",children:e.jsxs("main",{className:"py-6 grid grid-cols-1 gap-4 px-4",children:[e.jsxs("div",{className:"flex space-x-3 items-center justify-start",children:[e.jsx(M,{src:"/assets/image/category.png",alt:"Add Consumer",className:"w-11 h-11 rounded-lg bg-gray-200 p-2"}),e.jsxs("div",{className:"",children:[e.jsx("h1",{className:"font-semibold",children:"Add Consumer"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Add consumer details here."})]})]}),e.jsx(O,{}),e.jsx(H,{children:e.jsx(I,{children:e.jsxs(G,{methods:n,onSubmit:n.handleSubmit(L),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("div",{children:e.jsx(o,{selectedText:"selectText",isRequired:!0,name:"consumerCategory",label:"Consumer Category",data:(g=(x=(p=(c=d==null?void 0:d.data)==null?void 0:c.data)==null?void 0:p.consumerCategory)==null?void 0:x.map(r=>({label:String(r.name),value:String(r.id)})))!=null?g:[]})}),e.jsx("div",{children:e.jsx(o,{name:"consumerType",isRequired:!0,label:"Consumer Type",data:(y=(j=(b=(h=m==null?void 0:m.data)==null?void 0:h.data)==null?void 0:b.consumerTypeList)==null?void 0:j.map(r=>({label:String(r.name),value:String(r.id)})))!=null?y:[]})}),{2:e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(i,{isRequired:!0,name:"firmName",label:"Firm Name",type:"text"})}),e.jsx("div",{children:e.jsx(i,{isRequired:!0,name:"licenseNo",label:"License No",type:"text"})})]})}[n.watch("consumerCategory")],e.jsx("div",{children:e.jsx(o,{name:"wardNo",isRequired:!0,label:"Ward No",data:(v=(f=(C=(N=l==null?void 0:l.data)==null?void 0:N.data[0].ulbDetails[0])==null?void 0:C.wards)==null?void 0:f.map(r=>({label:String(r),value:String(r)})))!=null?v:[]})}),e.jsx("div",{children:e.jsx(i,{name:"holdingNo",label:"Holding No",type:"text",inputValidation:["removeSpace"]})}),e.jsx("div",{children:e.jsx(i,{name:"consumerName",isRequired:!0,label:"Consumer Name",type:"text",inputValidation:["removeDoubleSpace"]})}),e.jsx("div",{children:e.jsx(i,{name:"mobileNo",isRequired:!0,type:"number",label:"Mobile No",inputValidation:["mobile","number"]})}),e.jsx("div",{children:e.jsx(i,{name:"address",label:"Address",type:"text",isRequired:!0})}),e.jsx("div",{children:e.jsx(i,{isRequired:!0,name:"pinCode",label:"Pin Code",type:"text",inputValidation:["zip"]})}),e.jsx("div",{children:e.jsx(o,{name:"demandFrom",isRequired:!0,label:"Demand From",data:(q=A.map(r=>({label:String(r.str),value:String(r.str)})))!=null?q:[]})})]}),e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx(_,{isLoading:t.isLoading,disabled:t.isLoading,type:"submit",variant:"default",size:"sm",className:"rounded-md w-24",children:"Add Consumer"})})]})})})]})})}export{me as default};
