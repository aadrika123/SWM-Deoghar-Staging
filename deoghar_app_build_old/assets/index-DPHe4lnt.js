import{u as T,h as W,j as a,I as z,S as _,e as M,C as G,_ as $}from"./index-DEa_txxx.js";import{u as k,i as J,r as B}from"./router-DWxcwEcu.js";import{u as K,F as O,c as Q,a as r,o as X}from"./switch-Dki4Nm8l.js";import{u as Y}from"./useComonData-CqDrv_R-.js";import{R as o}from"./RHFTextField-BIF68JPT.js";import{B as Z}from"./ButtonLoading-L4RYSfHc.js";import{R as D}from"./SelectField-CHbza0qJ.js";import{R as ee}from"./RotatingLoader-CKaEZ9ZI.js";import{P as ae}from"./index-CHWdEz7k.js";import{C as de,b as se}from"./card-CArCQTth.js";import"./headlessui-DlCzxctq.js";import"./axios-BrYcoDUu.js";import"./module-DMtKSdao.js";const re=Q().shape({wardNo:r().required().label("Ward no"),holdingNo:r().required().label("Holding no"),consumerNo:r().required().label("Consumer no"),consumerName:r().notRequired().label("Consumer name"),mobileNo:r().required().label("Mobile no"),Address:r().required().label("Address"),pinCode:r().required().label("Pin code")});function be(){var c,u,p,N,g,x;const{getAllUser:t}=Y(),n=T({}),U=k(),{id:i}=J(),e=W({api:"".concat(M.getConsumerDetailsById,"/").concat(i),options:{enabled:!!i}}),m=B.useMemo(()=>{var d,s,h,b,j,f,C,v,y,S,R,q,A,w,E,P,F,L,H,I;return{wardNo:String((s=(d=e==null?void 0:e.data)==null?void 0:d.data[0])==null?void 0:s.wardNo),holdingNo:(j=String((b=(h=e==null?void 0:e.data)==null?void 0:h.data[0])==null?void 0:b.holdingNo))!=null?j:"",consumerNo:(v=String((C=(f=e==null?void 0:e.data)==null?void 0:f.data[0])==null?void 0:C.consumerNo))!=null?v:"",consumerName:(R=String((S=(y=e==null?void 0:e.data)==null?void 0:y.data[0])==null?void 0:S.consumerName))!=null?R:"",mobileNo:(w=String((A=(q=e==null?void 0:e.data)==null?void 0:q.data[0])==null?void 0:A.mobileNo))!=null?w:"",Address:(F=String((P=(E=e==null?void 0:e.data)==null?void 0:E.data[0])==null?void 0:P.Address))!=null?F:"",pinCode:(I=String((H=(L=e==null?void 0:e.data)==null?void 0:L.data[0])==null?void 0:H.pinCode))!=null?I:""}},[(c=e==null?void 0:e.data)==null?void 0:c.data[0]]),l=K({resolver:X(re),defaultValues:m});B.useEffect(()=>{var d;(d=e==null?void 0:e.data)!=null&&d.data[0]&&l.reset(m)},[(u=e==null?void 0:e.data)==null?void 0:u.data[0].id]);const V=async d=>{G("Are you sure?","Please confirm",async()=>{try{const s=await n.mutateAsync({api:M.postEditConsumerDetail,data:{address:d.Address,consumerId:i,mobileNo:d.mobileNo,name:d.consumerName,holdingNo:d.holdingNo,consumerTypeId:"",demandFrom:"",pincode:d.pinCode,wardNo:d.wardNo}});s.data.status?($.success(s.data.msg),U("/deoghar-app/consumer-actions/".concat(i))):$.error(s.data.msg)}catch(s){}})};return a.jsx(ae,{title:"Update Consumer",children:a.jsxs("main",{className:"py-6 grid grid-cols-1 gap-4 px-4",children:[a.jsxs("div",{className:"flex space-x-3 items-center justify-start",children:[a.jsx(z,{src:"/assets/image/category.png",alt:"Update Consumer",className:"w-11 h-11 rounded-lg bg-gray-200 p-2"}),a.jsxs("div",{className:"",children:[a.jsx("h1",{className:"font-semibold",children:"Update Consumer"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Solid waste management system"})]})]}),a.jsx(_,{}),a.jsx(de,{children:a.jsx(se,{children:a.jsx("div",{className:"p-4 md:p-5",children:e.isLoading?a.jsx("div",{className:"flex justify-center items-center h-[450px]",children:a.jsx(ee,{})}):a.jsxs(O,{methods:l,onSubmit:l.handleSubmit(V),children:[a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[a.jsx("div",{children:a.jsx(o,{name:"holdingNo",label:"Holding No",placeholder:"Enter Holding No",isRequired:!0})}),a.jsx("div",{children:a.jsx(o,{name:"consumerName",disabled:!0,label:"Consumer Name",placeholder:"Enter Consumer Name",isRequired:!0})}),a.jsx("div",{children:a.jsx(D,{name:"wardNo",label:"Ward No",isRequired:!0,selectedText:"Select Ward No",data:(x=(g=(N=(p=t==null?void 0:t.data)==null?void 0:p.data[0].ulbDetails[0])==null?void 0:N.wards)==null?void 0:g.map(d=>({label:String(d),value:String(d)})))!=null?x:[]})}),a.jsx("div",{children:a.jsx(o,{disabled:!0,isRequired:!0,name:"consumerNo",label:"Consumer No",placeholder:"Enter Consumer No"})}),a.jsx("div",{children:a.jsx(o,{name:"mobileNo",label:"Mobile No",type:"number",isRequired:!0,placeholder:"Enter Mobile No",inputValidation:["mobile"]})}),a.jsx("div",{children:a.jsx(o,{name:"Address",label:"Address",placeholder:"Enter Address",isRequired:!0})}),a.jsx("div",{children:a.jsx(o,{name:"pinCode",label:"Pin Code",placeholder:"Enter Pin Code",isRequired:!0,inputValidation:["zip"]})})]}),a.jsx("div",{className:"flex justify-end gap-3 mt-6 mb-2",children:a.jsx(Z,{isLoading:n.isLoading,disabled:n.isLoading,size:"sm",type:"submit",className:"w-20",children:"Update"})})]})})})})]})})}export{be as default};
